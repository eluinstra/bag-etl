<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

	<import resource="classpath:nl/ordina/bag/etl/applicationConfig.xml" />
	<import resource="classpath:nl/ordina/bag/etl/datasource.xml" />
	<import resource="classpath:nl/ordina/bag/etl/dao.xml" />

	<bean id="bagMutatieLeveringValidator" class="nl.ordina.bag.etl.job.BAGExtractLeveringValidator">
		<property name="klantnummer" value="${bagLeveringInfo.klantnummer}"/>
		<property name="productcode" value="${bagLeveringInfo.mutatie.productcode}"/>
		<property name="gebiedType" value="${bagLeveringInfo.gebiedType}"/>
		<property name="gegevensvariant" value="${bagLeveringInfo.gegevensvariant}"/>
		<property name="formaat" value="${bagLeveringInfo.formaat}"/>
		<property name="producttype" value="${bagLeveringInfo.mutatie.producttype}"/>
		<property name="productversie" value="${bagLeveringInfo.productversie}"/>
	</bean>

	<bean id="importMutatiesFileJob" class="nl.ordina.bag.etl.job.ImportMutatiesFileJob">
		<property name="bagMutatiesDAO" ref="bagMutatiesDAO"/>
		<property name="bagExtractLeveringValidator" ref="bagMutatieLeveringValidator"/>
	</bean>

	<bean id="mutatiesFileProcessor" class="nl.ordina.bag.etl.processor.MutatiesFileProcessor">
		<property name="bagMutatiesDAO" ref="bagMutatiesDAO"/>
	</bean>

	<bean id="mutationListener" class="nl.ordina.bag.etl.processor.DefaultMutationListener"/>

	<bean id="mutatiesProcessor" class="nl.ordina.bag.etl.processor.MutatiesProcessor">
		<property name="bagMutatiesDAO" ref="bagMutatiesDAO"/>
		<property name="bagDAO" ref="bagDAO"/>
		<property name="bagObjectFactory" ref="bagObjectFactory"/>
		<property name="mutationListener" ref="mutationListener"/>
	</bean>

	<bean id="importMutatiesJob" class="nl.ordina.bag.etl.job.ImportMutatiesJob">
		<property name="bagMutatiesDAO" ref="bagMutatiesDAO"/>
		<property name="bagDAO" ref="bagDAO"/>
		<property name="mutatiesFileProcessor" ref="mutatiesFileProcessor"/>
		<property name="mutatiesProcessor" ref="mutatiesProcessor"/>
	</bean>
	
</beans>